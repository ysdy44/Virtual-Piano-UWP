<Page
    x:Class="Virtual_Piano.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Virtual_Piano.Controls"
    xmlns:elements="using:Virtual_Piano.Elements"
    xmlns:notecontrols="using:Virtual_Piano.Notes.Controls"
    mc:Ignorable="d"
    Background="Black"
    >

    <Grid>

        <!--Extension-->
        <elements:ApplicationTitleBarExtension x:Name="ApplicationView" TitleBarColor="{ThemeResource SystemChromeLowColor}"/>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="44"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="44"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!--Title-->
            <TextBlock Grid.Row="1" IsHitTestVisible="False" Margin="30,6" Foreground="White" FontSize="80" FontFamily="Kunstler Script" HorizontalAlignment="Right" VerticalAlignment="Top">
                Virtual Piano
            </TextBlock>

            <!--Head-->
            <Grid Background="{ThemeResource SystemControlPageBackgroundChromeLowBrush}">

                <!--Player-->
                <Border CornerRadius="2" Height="30" BorderThickness="1" BorderBrush="SkyBlue" Background="Black" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <elements:DSTimer x:Name="DSTimer" Margin="12,0"/>
                </Border>
            </Grid>

            <!--Head-->
            <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}"  Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}">
                <ListView
                    SelectedIndex="1"
                    SelectionMode="Single"
             
                    ScrollViewer.ZoomMode="Disabled"
                  
                    ScrollViewer.HorizontalScrollMode="Enabled"
                    ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                    ScrollViewer.IsHorizontalScrollChainingEnabled="True"
            
                    ScrollViewer.VerticalScrollMode="Disabled"
                    ScrollViewer.VerticalScrollBarVisibility="Disabled"
                    ScrollViewer.IsVerticalScrollChainingEnabled="False"
                    >

                    <ListView.Header>
                        <ToggleButton x:Name="DockButton" Width="60" Padding="0" VerticalAlignment="Stretch" Style="{StaticResource TextBlockButtonStyle}">
                            <SymbolIcon Symbol="DockBottom"/>
                        </ToggleButton>
                    </ListView.Header>

                    <ListView.Footer>
                        <Button Width="60" Padding="0" VerticalAlignment="Stretch" Style="{StaticResource TextBlockButtonStyle}">
                            <Button.Flyout>
                                <MenuFlyout Placement="Bottom">
                               
                                    <MenuFlyoutItem Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem0.IsSelected), Mode=OneWay}">
                                        <MenuFlyoutItem.Icon>
                                            <SymbolIcon Symbol="Volume"/>
                                        </MenuFlyoutItem.Icon>
                                        Instrument
                                    </MenuFlyoutItem>
                                    
                                    <MenuFlyoutItem Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem1.IsSelected), Mode=OneWay}">
                                        <MenuFlyoutItem.Icon>
                                            <SymbolIcon Symbol="Keyboard"/>
                                        </MenuFlyoutItem.Icon>
                                        Piano
                                    </MenuFlyoutItem>
                                    
                                    <MenuFlyoutItem Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem2.IsSelected), Mode=OneWay}">
                                        <MenuFlyoutItem.Icon>
                                            <SymbolIcon Symbol="OneBar"/>
                                        </MenuFlyoutItem.Icon>
                                        Chord
                                    </MenuFlyoutItem>
                                    
                                    <MenuFlyoutItem Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem3.IsSelected), Mode=OneWay}">
                                        <MenuFlyoutItem.Icon>
                                            <SymbolIcon Symbol="ViewAll"/>
                                        </MenuFlyoutItem.Icon>
                                        Drum
                                    </MenuFlyoutItem>
                                    
                                </MenuFlyout>
                            </Button.Flyout>
                            <SymbolIcon Symbol="More"/>
                        </Button>
                    </ListView.Footer>

                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                    <ListViewItem x:Name="ListViewItem0">
                        <StackPanel Orientation="Horizontal">
                            <SymbolIcon Width="24" Height="24" Symbol="Volume"/>
                            <TextBlock Margin="4,0" VerticalAlignment="Center">
                                Instrument
                            </TextBlock>
                        </StackPanel>
                    </ListViewItem>

                    <ListViewItem x:Name="ListViewItem1">
                        <StackPanel Orientation="Horizontal">
                            <SymbolIcon Width="24" Height="24" Symbol="Keyboard"/>
                            <TextBlock Margin="4,0" VerticalAlignment="Center">
                                Piano
                            </TextBlock>
                        </StackPanel>
                    </ListViewItem>

                    <ListViewItem x:Name="ListViewItem2">
                        <StackPanel Orientation="Horizontal">
                            <SymbolIcon Width="24" Height="24" Symbol="OneBar"/>
                            <TextBlock Margin="4,0" VerticalAlignment="Center">
                                Chord
                            </TextBlock>
                        </StackPanel>
                    </ListViewItem>

                    <ListViewItem x:Name="ListViewItem3">
                        <StackPanel Orientation="Horizontal">
                            <SymbolIcon Width="24" Height="24" Symbol="ViewAll"/>
                            <TextBlock Margin="4,0" VerticalAlignment="Center">
                                Drum
                            </TextBlock>
                        </StackPanel>
                    </ListViewItem>

                </ListView>
            </Border>

            <!--Body-->
            <SplitView
                Grid.Row="1"
                IsPaneOpen="False" 
                DisplayMode="Inline"
                OpenPaneLength="200"
                PaneBackground="{ThemeResource SystemControlPageBackgroundChromeLowBrush}"
                >
                <controls:TrackPanel>
                    <notecontrols:NoteLeftPanel
                        Label="CDE"  
                        ItemSize="21"
                        WhiteSize="100" 
                        BlackSize="60" 
                        Command="{x:Bind Command}"
                        />
                </controls:TrackPanel>
            </SplitView>

            <!--Foot-->
            <Grid Grid.Row="3" Height="280" Visibility="{x:Bind BooleanNullableToVisibilityConverter(DockButton.IsChecked), Mode=OneWay}">

                <!--Instrument-->
                <controls:InstrumentCarousel Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem0.IsSelected), Mode=OneWay}" Command="{x:Bind Command}"/>

                <!--Note-->
                <Grid Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem1.IsSelected), Mode=OneWay}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <ScrollViewer
                         x:Name="NoteScrollViewer"
                         Grid.Row="1"
                         ZoomMode="Disabled"
                         
                         HorizontalScrollMode="Enabled"
                         HorizontalScrollBarVisibility="Hidden"
                         IsHorizontalScrollChainingEnabled="True"
                       
                         VerticalScrollMode="Disabled"
                         VerticalScrollBarVisibility="Disabled"
                         IsVerticalScrollChainingEnabled="False"
                         >
                        <notecontrols:NoteTopPanel
                             x:Name="NotePanel"
                             Label="CDE"
                             ItemSize="28"
                             WhiteSize="250" 
                             BlackSize="150" 
                             Command="{x:Bind Command}"
                             >
                            <!--Disable the ScrollViewer-->
                            <UIElement.ManipulationMode>
                                TranslateX
                            </UIElement.ManipulationMode>
                        </notecontrols:NoteTopPanel>
                    </ScrollViewer>
                    <notecontrols:NoteHorizontalScrollViewer ItemSize="28" ScrollViewer="{x:Bind NoteScrollViewer}"/>
                </Grid>

                <!--Chord-->
                <Grid ColumnSpacing="3" Margin="4" MaxWidth="900" Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem2.IsSelected), Mode=OneWay}">
                    <FrameworkElement.Resources>
                        <!--Style-->
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="8"/>
                            <Setter Property="Background" Value="#FCFCFC"/>
                        </Style>
                    </FrameworkElement.Resources>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>
                    <Border>
                        <notecontrols:ChordPanel Chord="C" Command="{x:Bind Command}"/>
                    </Border>
                    <Border Grid.Column="1">
                        <notecontrols:ChordPanel Chord="Dm" Command="{x:Bind Command}"/>
                    </Border>
                    <Border Grid.Column="2">
                        <notecontrols:ChordPanel Chord="Em" Command="{x:Bind Command}"/>
                    </Border>
                    <Border Grid.Column="3">
                        <notecontrols:ChordPanel Chord="F" Command="{x:Bind Command}"/>
                    </Border>
                    <Border Grid.Column="4">
                        <notecontrols:ChordPanel Chord="G" Command="{x:Bind Command}"/>
                    </Border>
                    <Border Grid.Column="5">
                        <notecontrols:ChordPanel Chord="Am" Command="{x:Bind Command}"/>
                    </Border>
                    <Border Grid.Column="6">
                        <notecontrols:ChordPanel Chord="Bdim" Command="{x:Bind Command}"/>
                    </Border>
                </Grid>

                <!--Drum-->
                <Grid Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem3.IsSelected), Mode=OneWay}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Border Background="{ThemeResource SystemControlPageBackgroundChromeLowBrush}">
                        <ListView
                            SelectedIndex="0"
                            SelectionMode="Single"
                        
                            ScrollViewer.ZoomMode="Disabled"
                          
                            ScrollViewer.HorizontalScrollMode="Enabled"
                            ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                            ScrollViewer.IsHorizontalScrollChainingEnabled="True"
                        
                            ScrollViewer.VerticalScrollMode="Disabled"
                            ScrollViewer.VerticalScrollBarVisibility="Disabled"
                            ScrollViewer.IsVerticalScrollChainingEnabled="False"
                            >

                            <ItemsControl.ItemContainerTransitions>
                                <TransitionCollection>

                                </TransitionCollection>
                            </ItemsControl.ItemContainerTransitions>

                            <ItemsControl.ItemContainerStyle>
                                <Style TargetType="ListViewItem">
                                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                </Style>
                            </ItemsControl.ItemContainerStyle>

                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>

                            <ListViewItem x:Name="ListViewItem31">
                                Default
                            </ListViewItem>

                            <ListViewItem x:Name="ListViewItem32">
                                All
                            </ListViewItem>

                            <ListViewItem x:Name="ListViewItem33">
                                Category
                            </ListViewItem>

                        </ListView>
                    </Border>
                    <controls:DrumPanel 
                        x:Name="DrumPanel"
                        Grid.Row="1" 
                        Command="{x:Bind Command}"
                        Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem31.IsSelected), Mode=OneWay}"
                        />
                    <ScrollViewer Grid.Row="1" Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem32.IsSelected), Mode=OneWay}">
                        <controls:DrumGridView Command="{x:Bind Command}"/>
                    </ScrollViewer>
                    <SplitView
                        Grid.Row="1" 
                        IsPaneOpen="True" 
                        DisplayMode="Inline"
                        OpenPaneLength="120"
                        PaneBackground="{x:Null}"
                        Visibility="{x:Bind BooleanToVisibilityConverter(ListViewItem33.IsSelected), Mode=OneWay}"
                        >
                        <SplitView.Pane>
                            <controls:DrumGroupGridView DrumPanel="{x:Bind DrumGridView}"/>
                        </SplitView.Pane>
                        <ScrollViewer>
                            <controls:DrumCategoryGridView x:Name="DrumGridView" Command="{x:Bind Command}"/>
                        </ScrollViewer>
                    </SplitView>

                </Grid>

            </Grid>

        </Grid>

    </Grid>
</Page>